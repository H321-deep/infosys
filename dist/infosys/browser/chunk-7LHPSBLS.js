import{b as R,c as z,d as N,e as I,f as T,g as A,m as F,n as j,o as W}from"./chunk-5ILGNDPG.js";import{$ as k,Ba as D,D as _,E as O,Fa as V,K as v,L as h,M as C,Q as u,R as e,S as n,T as x,U as y,V as f,W as S,Y as b,_ as t,aa as E,da as M,ea as P,fa as w,p as d,q as s,t as m,ua as L,z as a}from"./chunk-4O2FCN7H.js";function B(l,o){if(l&1&&(e(0,"div",15),t(1),n()),l&2){let c=S();a(),k(c.error())}}function U(l,o){l&1&&(e(0,"span"),t(1,"Logging in..."),n())}function G(l,o){l&1&&(e(0,"span"),t(1,"Login"),n())}var q=class l{constructor(o,c,i){this.authService=o;this.apiService=c;this.router=i}email=m("");password=m("");selectedRole=m("admin");showPassword=m(!1);error=m("");isLoading=m(!1);onSubmit(){if(this.error.set(""),!this.email().trim()||!this.password().trim()){this.error.set("Please fill in all fields");return}this.isLoading.set(!0),this.apiService.login(this.email().trim(),this.password()).subscribe({next:o=>{if(o.username&&o.role){if(o.role!==this.selectedRole()){this.error.set(`Please log in using the ${o.role} tab.`),this.isLoading.set(!1);return}o.token&&localStorage.setItem("authToken",o.token),this.authService.setUserFromApiResponse(o.username,o.role,this.email().trim()),this.router.navigate(["/welcome"])}else this.error.set("Invalid response from server");this.isLoading.set(!1)},error:o=>{console.error("Login error:",o),this.error.set(o.error?.message||"Invalid email or password"),this.isLoading.set(!1)}})}setRole(o){this.selectedRole.set(o)}togglePasswordVisibility(){this.showPassword.update(o=>!o)}static \u0275fac=function(c){return new(c||l)(_(V),_(W),_(D))};static \u0275cmp=O({type:l,selectors:[["app-login"]],decls:70,vars:14,consts:[["loginForm","ngForm"],[1,"login-container"],[1,"login-shell"],[1,"login-wrapper"],[1,"login-hero"],[1,"hero-content"],[1,"hero-brand"],[1,"brand-mark"],[1,"hero-copy"],["src","/assets/icons/image.jpeg","alt","Login Illustration","onerror","this.style.display='none';",1,"hero-image"],[1,"login-card"],[1,"card-header"],[1,"subtitle"],[1,"role-toggle"],["type","button",1,"role-btn",3,"click"],[1,"error-message"],[3,"ngSubmit"],[1,"form-group"],["for","email"],[1,"input-wrapper"],[1,"input-icon"],["type","text","id","email","name","email","required","","placeholder","Enter your username",3,"ngModelChange","ngModel","disabled"],["for","password"],["id","password","name","password","required","","placeholder","Enter your password",3,"ngModelChange","type","ngModel","disabled"],["type","button",1,"input-trailing",3,"click"],[1,"form-row"],[1,"remember-me"],["type","checkbox"],["href","#",1,"forgot-link",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],[1,"support-link"],["href","#",3,"click"],[1,"login-footer"]],template:function(c,i){if(c&1){let g=y();e(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"span",7),t(7,"IP"),n(),e(8,"div")(9,"h2"),t(10,"Inventory Pro"),n(),e(11,"p"),t(12,"Inventory management solution for modern retail"),n()()(),e(13,"div",8)(14,"h3"),t(15,"Track products, stock, and sales from one place"),n(),e(16,"ul")(17,"li"),t(18,"Real-time stock alerts"),n(),e(19,"li"),t(20,"Quick access to reports"),n(),e(21,"li"),t(22,"Secure role-based access"),n()()()(),x(23,"img",9),n(),e(24,"div",10)(25,"div",11)(26,"h1"),t(27,"Welcome Back"),n(),e(28,"p",12),t(29,"Login to access your inventory dashboard"),n()(),e(30,"div",13)(31,"button",14),f("click",function(){return d(g),s(i.setRole("user"))}),t(32," Employee "),n(),e(33,"button",14),f("click",function(){return d(g),s(i.setRole("admin"))}),t(34," Administrator "),n()(),h(35,B,2,1,"div",15),e(36,"form",16,0),f("ngSubmit",function(){return d(g),s(i.onSubmit())}),e(38,"div",17)(39,"label",18),t(40,"Username"),n(),e(41,"div",19)(42,"span",20),t(43,"\u{1F464}"),n(),e(44,"input",21),w("ngModelChange",function(r){return d(g),P(i.email,r)||(i.email=r),s(r)}),n()()(),e(45,"div",17)(46,"label",22),t(47,"Password"),n(),e(48,"div",19)(49,"span",20),t(50,"\u{1F512}"),n(),e(51,"input",23),w("ngModelChange",function(r){return d(g),P(i.password,r)||(i.password=r),s(r)}),n(),e(52,"button",24),f("click",function(){return d(g),s(i.togglePasswordVisibility())}),t(53),n()()(),e(54,"div",25)(55,"label",26),x(56,"input",27),e(57,"span"),t(58,"Remember me"),n()(),e(59,"a",28),f("click",function(r){return d(g),s(r.preventDefault())}),t(60,"Forgot password?"),n()(),e(61,"button",29),h(62,U,2,0,"span")(63,G,2,0,"span"),n()(),e(64,"div",30),t(65," Need help? "),e(66,"a",31),f("click",function(r){return d(g),s(r.preventDefault())}),t(67,"Contact Support"),n()(),e(68,"div",32),t(69,"\xA9 2024 Inventory Pro. All rights reserved."),n()()()()()}c&2&&(a(31),b("active",i.selectedRole()==="user"),a(2),b("active",i.selectedRole()==="admin"),a(2),C(i.error()?35:-1),a(9),M("ngModel",i.email),u("disabled",i.isLoading()),a(7),u("type",i.showPassword()?"text":"password"),M("ngModel",i.password),u("disabled",i.isLoading()),a(),v("aria-label",i.showPassword()?"Hide password":"Show password"),a(),E(" ",i.showPassword()?"\u{1F648}":"\u{1F441}\uFE0F"," "),a(8),u("disabled",i.isLoading()),a(),C(i.isLoading()?62:63))},dependencies:[L,j,A,R,z,N,F,T,I],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#dfe4ff,#f3f5ff,#e9efff);padding:32px 20px}.login-shell[_ngcontent-%COMP%]{width:min(1200px,96vw)}.login-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.1fr .9fr;background:#fff;border-radius:22px;box-shadow:0 20px 45px #4054b22e;overflow:hidden}@media (max-width: 960px){.login-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr}}.login-hero[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b4cc0,#5b6ee1 60%,#5f7cfb);color:#fff;padding:40px;display:flex;flex-direction:column;justify-content:space-between;min-height:560px;gap:24px}.login-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:28px}.login-hero[_ngcontent-%COMP%]   .hero-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px}.login-hero[_ngcontent-%COMP%]   .hero-brand[_ngcontent-%COMP%]   .brand-mark[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:14px;background:#fff3;display:grid;place-items:center;font-weight:700;letter-spacing:.5px}.login-hero[_ngcontent-%COMP%]   .hero-brand[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700}.login-hero[_ngcontent-%COMP%]   .hero-brand[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;opacity:.85;font-size:14px}.login-hero[_ngcontent-%COMP%]   .hero-copy[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;font-size:24px;line-height:1.3}.login-hero[_ngcontent-%COMP%]   .hero-copy[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:18px;display:grid;gap:8px;opacity:.9;font-size:14px}.login-hero[_ngcontent-%COMP%]   .hero-image[_ngcontent-%COMP%]{width:min(360px,100%);align-self:center;border-radius:16px;box-shadow:0 18px 40px #1a246659}@media (max-width: 960px){.login-hero[_ngcontent-%COMP%]{min-height:auto;padding:32px}.login-hero[_ngcontent-%COMP%]   .hero-image[_ngcontent-%COMP%]{display:none}}.login-card[_ngcontent-%COMP%]{padding:44px 40px;display:flex;flex-direction:column;gap:18px}.login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 6px;font-size:28px;font-weight:700;color:#2d3748}.login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;color:#718096;font-size:14px}.login-card[_ngcontent-%COMP%]   .role-toggle[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;background:#f1f4ff;padding:6px;border-radius:12px;gap:8px}.login-card[_ngcontent-%COMP%]   .role-btn[_ngcontent-%COMP%]{border:none;border-radius:10px;padding:10px 12px;font-weight:600;background:transparent;color:#4a5568;cursor:pointer}.login-card[_ngcontent-%COMP%]   .role-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4b5eea,#5a6efb);color:#fff;box-shadow:0 6px 16px #5066ee59}.login-card[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#fff5f5;color:#c53030;padding:12px 14px;border-radius:8px;font-size:13px;border:1px solid #fed7d7}.login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#2d3748}.login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background:#f7f9ff;border:1.5px solid #d8dff7;border-radius:12px;padding:12px 14px;transition:border-color .2s,box-shadow .2s}.login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:focus-within{border-color:#5a6efb;box-shadow:0 0 0 4px #5a6efb2e}.login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;background:transparent;width:100%;font-size:14px;color:#2d3748}.login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{font-size:16px;color:#718096}.login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-trailing[_ngcontent-%COMP%]{border:none;background:transparent;font-size:16px;color:#a0aec0;cursor:pointer;padding:0}.login-card[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:13px;color:#718096}.login-card[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .remember-me[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.login-card[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;accent-color:#5a6efb}.login-card[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]{color:#5a6efb;text-decoration:none;font-weight:600}.login-card[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{border:none;border-radius:12px;padding:12px 16px;background:linear-gradient(135deg,#4b5eea,#5a6efb);color:#fff;font-size:15px;font-weight:700;cursor:pointer;transition:transform .2s,box-shadow .2s}.login-card[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 8px 18px #5066ee59}.login-card[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.login-card[_ngcontent-%COMP%]   .support-link[_ngcontent-%COMP%]{text-align:center;font-size:13px;color:#718096}.login-card[_ngcontent-%COMP%]   .support-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5a6efb;text-decoration:none;font-weight:600}.login-card[_ngcontent-%COMP%]   .login-footer[_ngcontent-%COMP%]{text-align:center;font-size:12px;color:#a0aec0}@media (max-width: 960px){.login-card[_ngcontent-%COMP%]{padding:32px 28px}}"]})};export{q as LoginComponent};
